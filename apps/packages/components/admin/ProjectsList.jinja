{#def request, user, projects, title="Manage Projects" #}
{#import "../layouts/Admin.jinja" as AdminLayout #}
{#import "../ui/PageHeader.jinja" as PageHeader #}
{#import "../ui/Button.jinja" as Button #}
{#import "../ui/Badge.jinja" as Badge #}
{#import "../ui/EmptyState.jinja" as EmptyState #}

<AdminLayout request={{ request }} user={{ user }} title={{ title }} current_page="projects">
    <div class="space-y-6">
        <PageHeader title="Projects" description="Manage your portfolio projects.">
            <Button href="/admin/projects/new" variant="primary">New Project</Button>
        </PageHeader>

        <div class="overflow-x-auto">
            <table class="w-full text-sm text-left">
                <thead class="text-xs text-gray-400 uppercase border-b border-gray-800">
                    <tr>
                        <th class="py-3 px-4">Title</th>
                        <th class="py-3 px-4">Category</th>
                        <th class="py-3 px-4">Featured</th>
                        <th class="py-3 px-4">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for project in projects %}
                    <tr class="border-b border-gray-800 hover:bg-gray-900/50">
                        <td class="py-3 px-4 text-white">{{ project.title }}</td>
                        <td class="py-3 px-4 text-gray-400">{{ project.category or '-' }}</td>
                        <td class="py-3 px-4">
                            {% if project.featured %}
                            <Badge text="Yes" color="green" />
                            {% else %}
                            <span class="text-gray-500">No</span>
                            {% endif %}
                        </td>
                        <td class="py-3 px-4">
                            <div class="flex gap-2">
                                <Button href={{ "/admin/projects/" ~ project.id }} size="sm">Edit</Button>
                                <form method="post" action={{ "/admin/projects/" ~ project.id ~ "/delete" }} class="inline" data-confirm="Delete this project?">
                                    <Button type="submit" size="sm" variant="ghost">Delete</Button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4">
                            <EmptyState message="No projects yet." />
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</AdminLayout>
