{#def request, user=None, projects=[], current_tech="", current_search="" #}
{#import "../layouts/Public.jinja" as PublicLayout #}
{#import "../projects/ProjectCard.jinja" as ProjectCard #}
{#import "../ui/Input.jinja" as Input #}

<PublicLayout request={{ request }} user={{ user }} title="Projects" current_page="projects">
    <div class="space-y-6 sm:space-y-8">
        <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div>
                <h1 class="text-2xl sm:text-3xl font-bold text-white mb-2">Projects</h1>
                <p class="text-sm sm:text-base text-gray-400">A collection of projects I've worked on.</p>
            </div>
            <form hx-get="/projects" hx-target="#projects-grid" hx-trigger="input changed delay:300ms, submit" hx-swap="innerHTML" hx-push-url="false">
                <Input 
                    name="search" 
                    type="search" 
                    placeholder="Search projects..."
                    value={{ current_search or current_tech }}
                />
            </form>
        </header>

        <div id="projects-grid" class="space-y-3 sm:space-y-4">
            {% for project in projects %}
            <ProjectCard project={{ project }} />
            {% else %}
            <div class="text-center py-8 sm:py-12">
                <p class="text-sm sm:text-base text-gray-500">No projects found.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</PublicLayout>

